2021-02-18



###### 쓰레드 그리고 코루틴



쓰레드와 코루틴의 활용은 나에게 있어서 고민이다. 옛날에 주워들은 걸로는 유니티는 싱글 코어만 갈군다는 말이 있었다. 그래서 코루틴과 쓰레드 두개가 있을 때 쓰레드는 메인 ui에 접근을 못하니 코루틴을 쓰라는 말을 들었고 왠만하면 코루틴 내에서 활용하려고 했다.



그러나 보면 잡시스템도 있고 유니티 문서에서 멀티 스레딩을 언급하는 걸 보면 멀티코어를 지원해주는 것 같았다.(쓰레드의 수가 멀티 코어보다 늘어나면 효율이 줄어든다는 언급이 있다.)



"멀티스레딩은 여러 코어에서 한 번에 여러 개의 스레드를 처리하는 CPU 성능을 활용하는 프로그래밍의 한 유형입니다. 한 번에 하나가 아니라, 동시에 여러 개의 작업 또는 명령을 실행합니다.

어떤 스레드는 기본적으로 프로그램이 시작할 때 실행됩니다. 이 스레드가 바로 ’메인 스레드’입니다. 메인 스레드는 작업을  처리하기 위해 새로운 스레드를 생성합니다. 이러한 새 스레드는 다른 스레드와 병렬로 실행되며, 대개 실행이 완료되면 메인 스레드와 결과를 동기화합니다."



그래서 실제로 멀티스레드를 적용해보려 생각하고 있지만 지금 현업에서는 전부 코루틴을 사용하는 것 같아서 그냥 코루틴을 사용하는게 좋은거 같기도 하고 아직은 잘 모르겠다.



---



스레드 운용법 스케치



일종의 큐. 저장 공간이 있고 스레드와 메인 스레드는 이 큐를 공유한다.



메인 스레드는 주기적으로(코루틴) 큐의 명령어를 받고 스레드는 자신이 처리한 작업을 큐에 옮긴다.



큐에 옮겨진 작업에 따라 ui를 변하게 하거나 한번에 일을 처리한다.



만약 스레드가 끝나면 해당 호출 코루틴을 종료.(혹은 일정 시간 동안 작업이 안 끝나면 종료.)

